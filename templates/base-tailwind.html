<!DOCTYPE html>
<html lang="en" data-theme="corporate">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}{{ app_title }}{% endblock %}</title>
    <link rel="icon" type="image/png" href="{{ app_icon }}">
    <link rel="apple-touch-icon" href="{{ app_icon }}">

    <!-- TailwindCSS + DaisyUI -->
    <link rel="stylesheet" href="/static/css/tailwind.css">

    <!-- HTMX for dynamic interactions -->
    <script src="https://unpkg.com/htmx.org@1.9.10"></script>

    <!-- Alpine.js for client-side interactivity -->
    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>

    {% block extra_head %}{% endblock %}
</head>
<body class="bg-base-100 min-h-screen flex flex-col">
    <!-- Main Content -->
    <main class="flex-1">
        {% block content %}{% endblock %}
    </main>

    <!-- Toast Container -->
    <div id="toast-container" class="toast toast-top toast-end z-50"></div>

    {% block extra_scripts %}{% endblock %}

    <script>
        // Global utilities
        function copyToClipboard(text) {
            navigator.clipboard.writeText(text).then(() => {
                showToast('Copied to clipboard!', 'success');
            }).catch(() => {
                showToast('Failed to copy', 'error');
            });
        }

        function showToast(message, type = 'info') {
            const toast = document.createElement('div');
            toast.className = `alert alert-${type} shadow-lg mb-2`;
            toast.innerHTML = `
                <div>
                    <span>${message}</span>
                </div>
            `;
            document.getElementById('toast-container').appendChild(toast);
            setTimeout(() => toast.remove(), 3000);
        }

        // Theme switcher
        function toggleTheme() {
            const html = document.documentElement;
            const current = html.getAttribute('data-theme');
            const newTheme = current === 'corporate' ? 'business' : 'corporate';
            html.setAttribute('data-theme', newTheme);
            localStorage.setItem('theme', newTheme);
        }

        // Load saved theme
        const savedTheme = localStorage.getItem('theme') || 'corporate';
        document.documentElement.setAttribute('data-theme', savedTheme);
    </script>
</body>
</html>
