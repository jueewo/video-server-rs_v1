warning: unused import: `collections::HashMap`
  --> crates/video-manager/src/lib.rs:12:11
   |
12 | use std::{collections::HashMap, path::PathBuf, sync::Arc};
   |           ^^^^^^^^^^^^^^^^^^^^
   |
   = note: `#[warn(unused_imports)]` (part of `#[warn(unused)]`) on by default

warning: `video-manager` (lib) generated 1 warning (run `cargo fix --lib -p video-manager` to apply 1 suggestion)
   Compiling video-server-rs v0.1.0 (/Users/juergen/MyDev/MyProjects/video-server-rs_v1)
    Finished `dev` profile [unoptimized + debuginfo] target(s) in 1.32s
     Running `target/debug/video-server-rs`

ğŸš€ Initializing Modular Video Server...
ğŸ” OIDC Configuration:
   - Issuer URL: http://localhost:8088
   - Client ID: f4e64e4265ac63ea837c
   - Redirect URI: http://localhost:3000/oidc/callback
ğŸ” Discovering OIDC provider: http://localhost:8088
âœ… OIDC provider discovery successful
âœ… OIDC authentication enabled
ğŸª Session Configuration:
   - Cookie name: video_server_session
   - HTTP-only: true
   - Same-site: Lax
   - Expiry: 7 days inactivity
ğŸ”’ Emergency login is DISABLED

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘   ğŸ¥  MODULAR VIDEO SERVER - READY!                           â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“¦ MODULES LOADED:
   âœ… video-manager    (Video streaming & HLS proxy)
   âœ… image-manager    (Image upload & serving)
   âœ… user-auth        (Session management, OIDC ready)
   âœ… access-codes     (Shared media access)
ğŸ“Š SERVER ENDPOINTS:
   â€¢ Web UI:        http://0.0.0.0:3000
   â€¢ Test Player:   http://0.0.0.0:3000/test
   â€¢ Login:         http://0.0.0.0:3000/login
   â€¢ OIDC Login:    http://0.0.0.0:3000/oidc/authorize
   â€¢ Emergency:     http://0.0.0.0:3000/login/emergency
   â€¢ Images:        http://0.0.0.0:3000/images
   â€¢ Upload:        http://0.0.0.0:3000/upload
   â€¢ Health:        http://0.0.0.0:3000/health
   â€¢ MediaMTX API:  http://0.0.0.0:3000/api/mediamtx/status
   â€¢ Access Codes:  http://0.0.0.0:3000/api/access-codes

ğŸ“¡ MEDIAMTX CONFIGURATION:
   â€¢ RTMP Input:    rtmp://localhost:1935/live
   â€¢ HLS Output:    http://localhost:8888/live/index.m3u8
   â€¢ WebRTC Output: http://localhost:8889/live
   â€¢ API:           http://localhost:9997
   â€¢ Metrics:       http://localhost:9998/metrics

ğŸ¬ STREAMING COMMANDS:

   macOS (Camera + Microphone):
   ffmpeg -f avfoundation -framerate 30 -video_size 1280x720 -i "0:0" \
     -c:v libx264 -preset veryfast -tune zerolatency \
     -c:a aac -b:a 128k -ar 44100 \
     -f flv "rtmp://localhost:1935/live?token=supersecret123"

   Linux (Webcam + Microphone):
   ffmpeg -f v4l2 -i /dev/video0 -f alsa -i hw:0 \
     -c:v libx264 -preset veryfast -tune zerolatency \
     -c:a aac -b:a 128k -ar 44100 \
     -f flv "rtmp://localhost:1935/live?token=supersecret123"

   OBS Studio:
   â€¢ Server:     rtmp://localhost:1935/live
   â€¢ Stream Key: ?token=supersecret123

âš ï¸  IMPORTANT:
   1. Make sure MediaMTX is running: mediamtx mediamtx.yml
   2. Login first: http://0.0.0.0:3000/login
   3. Then watch: http://0.0.0.0:3000/test

ğŸ’¡ TIPS:
   â€¢ List devices: ffmpeg -f avfoundation -list_devices true -i ""
   â€¢ Check MediaMTX: curl http://localhost:9997/v3/paths/list
   â€¢ View logs: MediaMTX logs appear in its terminal

ğŸ”§ ARCHITECTURE:
   This server is now modular with separate crates:
   â€¢ crates/video-manager - Video streaming logic
   â€¢ crates/image-manager - Image handling logic
   â€¢ crates/user-auth     - OIDC Authentication (Casdoor)

ğŸ” AUTHENTICATION:
   â€¢ Primary:   OIDC with Casdoor (Login with Appkask)
   â€¢ Fallback:  Emergency local login
   â€¢ Configure: Set OIDC_* environment variables

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

